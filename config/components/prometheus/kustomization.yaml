apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

resources:
  - servicemonitor.yaml
  - role.yaml
  - rolebinding.yaml

patches:
  - target:
      kind: ServiceMonitor
    patch: |
      # override the namespace transformer for the ServiceMonitor
      - op: replace
        path: metadata/namespace
        value: openshift-monitoring
      # if changing the namespace from config/default/kustomization.yaml -> change value here
      - op: add
        path: /spec/namespaceSelector
        value:
          matchNames:
            - open-cluster-management
